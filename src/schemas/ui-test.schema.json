{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "UI Test Suite",
  "description": "Schema for UI/browser test scenario JSON files used by the Universal Test Engine",
  "type": "object",
  "required": ["suite", "tests"],
  "properties": {
    "suite": {
      "type": "string",
      "description": "Human-readable name of the test suite"
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" }
    },
    "basePath": {
      "type": "string",
      "description": "Optional path prepended to every test URL"
    },
    "setup": {
      "$ref": "#/definitions/uiAction",
      "description": "Actions to run before the suite (e.g. login flow)"
    },
    "teardown": {
      "$ref": "#/definitions/uiAction",
      "description": "Actions to run after the suite"
    },
    "tests": {
      "type": "array",
      "minItems": 1,
      "items": { "$ref": "#/definitions/uiTestCase" }
    }
  },
  "definitions": {
    "uiTestCase": {
      "type": "object",
      "required": ["name", "steps"],
      "properties": {
        "name": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "url": { "type": "string", "description": "Page to navigate to before steps" },
        "viewport": {
          "type": "object",
          "properties": {
            "width": { "type": "number" },
            "height": { "type": "number" }
          }
        },
        "steps": {
          "type": "array",
          "minItems": 1,
          "items": { "$ref": "#/definitions/uiAction" }
        },
        "snapshot": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "fullPage": { "type": "boolean", "default": false },
            "selector": { "type": "string" }
          }
        },
        "skip": { "type": "boolean", "default": false },
        "only": { "type": "boolean", "default": false },
        "timeout": { "type": "number" },
        "retries": { "type": "number" },
        "dataInjection": { "type": "object" }
      }
    },
    "uiAction": {
      "type": "object",
      "required": ["action"],
      "properties": {
        "action": {
          "type": "string",
          "enum": [
            "goto",
            "click",
            "fill",
            "select",
            "check",
            "uncheck",
            "hover",
            "press",
            "wait",
            "waitForSelector",
            "waitForURL",
            "assertVisible",
            "assertHidden",
            "assertText",
            "assertValue",
            "assertURL",
            "assertTitle",
            "assertCount",
            "screenshot",
            "scroll",
            "upload",
            "evaluate"
          ]
        },
        "selector": { "type": "string" },
        "value": {},
        "options": { "type": "object" },
        "description": { "type": "string" }
      }
    }
  }
}
